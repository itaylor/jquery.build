<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="../lib/qunit.js"></script>
<script src="../lib/qunit-helpers.js"></script>
<script src="../lib/jquery-1.6.2.js"></script>
<script src="../jquery.build.js"></script>
<link rel="stylesheet" href="../lib/qunit.css" type="text/css" media="screen" />
</head>
<body>
  <h1 id="qunit-header">jquery.build.docFrag tests</h1>
  <h2 id="qunit-banner"></h2>
  <h2 id="qunit-userAgent"></h2>
  <ol id="qunit-tests"></ol>
  <div id="qunit-fixture"></div>
  <script>
      jQuery(function($) {

        test("Simple base case with three elements in an array", 1, function() {
          var elem1 = document.createElement("div");
          var elem2 = document.createElement("div");
          var elem3 = document.createElement("div");

          var tgt = document.createElement("div");
          var df = $.build.docFrag([ elem1, elem2, elem3 ]);
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "<div></div><div></div><div></div>");
        });

        test("Non array (single element) input", 1, function() {
          var elem1 = document.createElement("div");
          var tgt = document.createElement("div");
          var df = $.build.docFrag(elem1);
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "<div></div>");
        });

        test("Non array (single element) html string input", 1, function() {
          var tgt = document.createElement("div");
          var df = $.build.docFrag("this <p>is cool</p>");
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "this <p>is cool</p>");
        });

        test("Mixing strings with elements", 1, function() {
          var elem1 = document.createElement("div");
          var elem2 = "this is a string";
          var elem3 = document.createElement("div");

          var tgt = document.createElement("div");
          var df = $.build.docFrag([ elem1, elem2, elem3 ]);
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "<div></div>this is a string<div></div>");
        });

        test("Mixing strings with elements and nested DocFrags", 1, function() {
          var elem1 = document.createElement("div");
          var elem2 = "this is a string";
          var elem3 = $.build.docFrag([ "test" ]);

          var tgt = document.createElement("div");
          var df = $.build.docFrag([ elem1, elem2, elem3 ]);
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "<div></div>this is a stringtest");
        });

        test("Nested arrays with nested docFrags", 1, function() {
          var elem1 = document.createElement("div");
          var elem2 = "this is a string";
          var elem3 = [ "test", $.build.docFrag(" cool") ];

          var tgt = document.createElement("div");
          var df = $.build.docFrag([ elem1, elem2, elem3 ]);
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "<div></div>this is a stringtest cool");
        });

        test("TextNodes appended properly", 1, function() {
          var elem1 = document.createElement("div");
          var elem2 = "this is a string";
          var elem3 = document.createTextNode(" it was made with a textnode");

          var tgt = document.createElement("div");
          var df = $.build.docFrag([ elem1, elem2, elem3 ]);
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "<div></div>this is a string it was made with a textnode");
        });

        test("Strings with html in them",1,function() {
          var elem1 = document.createElement("div");
          var elem2 = "this is a <b>string</b>";

          var tgt = document.createElement("div");
          var df = $.build.docFrag([ elem1, elem2 ]);
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "<div></div>this is a <b>string</b>");
        });

        test("Strings with no html, but html entities in", 1, function() {
          var elem1 = document.createElement("div");
          var elem2 = "this is ian&apos;s &quot;test &amp; string&quot;";

          var tgt = document.createElement("div");
          var df = $.build.docFrag([ elem1, elem2 ]);
          //grabbing the value using innerHTML will re-encode the ampersand value as "&amp; need to traverse to get the real textnode value"
          htmlCompareForIE(df.childNodes[1].nodeValue, "this is ian's \"test & string\"");
        });

        test("Strings with html and html entities in",1, function() {
          var elem1 = document.createElement("div");
          var elem2 = "<p>this is ian&apos;s &quot;test &amp; string&quot;</p>";

          var tgt = document.createElement("div");
          var df = $.build.docFrag([ elem1, elem2 ]);
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "<div></div><p>this is ian's \"test &amp; string\"</p>");
        });

        test("String with lots of foreign characters in", 1, function() {
          var elem1 = document.createElement("div");
          var elem2 = "<p>&iexcl;dios mio iañ &atilde; &#227!</p>";

          var tgt = document.createElement("div");
          var df = $.build.docFrag([ elem1, elem2 ]);
          tgt.appendChild(df);
          htmlCompareForIE(tgt.innerHTML, "<div></div><p>¡dios mio iañ ã ã!</p>");
        });
      });
    </script>
</body>
</html>